apiVersion: 2023-05-01
location: westeurope
name: "ci-dfx-hb-${CRYPTO_PAIR}-dev"
type: Microsoft.ContainerInstance/containerGroups
properties:
  osType: Linux
  containers:
    - name: "hb-${CRYPTO_PAIR}"
      properties:
        image: dfxswiss/hummingbot:beta
        resources:
          requests:
            cpu: 2.0
            memoryInGb: 4.0
        environmentVariables:
          - name: BOT_DIR
            value: "${CRYPTO_PAIR}-dev"
          - name: DEPLOY_INFO
            value: "${DEPLOY_INFO}"
        volumeMounts:
          - name: volume
            mountPath: /mnt/hummingbot
  volumes:
    - name: volume
      azureFile:
        shareName: "ci-hb-${CRYPTO_PAIR}"
        storageAccountName: stdfxapidev
        storageAccountKey: "${STORAGE_KEY}"
  restartPolicy: Always
  imageRegistryCredentials:
    - server: index.docker.io
      username: "${DOCKER_USERNAME}"
      password: "${DOCKER_PASSWORD}"
