apiVersion: 2023-05-01
location: westeurope
name: "ci-dfx-hb-${CRYPTO_PAIR}-prd"
type: Microsoft.ContainerInstance/containerGroups
properties:
  osType: Linux
  containers:
    - name: "hb-${CRYPTO_PAIR}"
      properties:
        image: dfxswiss/hummingbot:latest
        resources:
          requests:
            cpu: 0.5
            memoryInGb: 1.0
        environmentVariables:
          - name: BOT_DIR
            value: "${CRYPTO_PAIR}"
          - name: STRATEGY_FILE
            value: "${CRYPTO_PAIR}-conf_pure_mm.yml"
          - name: DEPLOY_INFO
            value: "${DEPLOY_INFO}"
        volumeMounts:
          - name: volume
            mountPath: /mnt/hummingbot
  volumes:
    - name: volume
      azureFile:
        shareName: "ci-hb-${CRYPTO_PAIR}"
        storageAccountName: stdfxapiprd
        storageAccountKey: "${STORAGE_KEY}"
  restartPolicy: Always
  imageRegistryCredentials:
    - server: index.docker.io
      username: "${DOCKER_USERNAME}"
      password: "${DOCKER_PASSWORD}"
  diagnostics:
    logAnalytics:
      workspaceId: "${LOG_WORKSPACE_ID}"
      workspaceKey: "${LOG_WORKSPACE_KEY}"
